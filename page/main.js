!function(){"use strict";var e,t,n={512:function(e,t,n){n.d(t,{M:function(){return a},b:function(){return s}});const s={INDEX:"index",PRODUCT:"product",NOT_FOUND:"nt-found"},a="{id}"},684:function(e,t,n){n.d(t,{A:function(){return s}});class s{constructor(e){this.element=null,this.createElement(e)}createElement(e){this.element=document.createElement(e.tag),this.setCssClasses(e.classNames),this.setTextContent(e.textContent),this.setCallback(e.callback)}getElement(){return this.element}addInnerElement(e){e instanceof s?this.element.append(e.getElement()):this.element.append(e)}setCssClasses(e){e.map((e=>this.element.classList.add(e)))}setTextContent(e){this.element.textContent=e}setCallback(e){"function"==typeof e&&this.element.addEventListener("click",(t=>e(t)))}}},647:function(e,t,n){n.d(t,{A:function(){return a}});var s=n(684);class a{constructor(e){this.elementCreator=this.createView(e)}getHtmlElement(){return this.elementCreator.getElement()}createView(e){const t={tag:e.tag,classNames:e.classNames,textContent:e.textContent,callback:e.callback};return new s.A(t)}}}},s={};function a(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}};return n[e](r,r.exports,a),r.exports}a.m=n,a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,n){return a.f[n](e,t),t}),[]))},a.u=function(e){return e+".main.js"},a.miniCssF=function(e){return e+"."+{40:"f5cddc01e7b04f735ace",173:"03c6e70c7a982f18bade",719:"c3634b777377bd53f5de"}[e]+".css"},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e={},t="spaclasses:",a.l=function(n,s,r,i){if(e[n])e[n].push(s);else{var o,c;if(void 0!==r)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var h=l[u];if(h.getAttribute("src")==n||h.getAttribute("data-webpack")==t+r){o=h;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",t+r),o.src=n),e[n]=[s];var d=function(t,s){o.onerror=o.onload=null,clearTimeout(m);var a=e[n];if(delete e[n],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((function(e){return e(s)})),t)return t(s)},m=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),c&&document.head.appendChild(o)}},function(){var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var s=n.length-1;s>-1&&(!e||!/^http(s?):/.test(e));)e=n[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e}(),function(){if("undefined"!=typeof document){var e={792:0};a.f.miniCss=function(t,n){e[t]?n.push(e[t]):0!==e[t]&&{40:1,173:1,719:1}[t]&&n.push(e[t]=function(e){return new Promise((function(t,n){var s=a.miniCssF(e),r=a.p+s;if(function(e,t){for(var n=document.getElementsByTagName("link"),s=0;s<n.length;s++){var a=(i=n[s]).getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(a===e||a===t))return i}var r=document.getElementsByTagName("style");for(s=0;s<r.length;s++){var i;if((a=(i=r[s]).getAttribute("data-href"))===e||a===t)return i}}(s,r))return t();!function(e,t,n,s,r){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",a.nc&&(i.nonce=a.nc),i.onerror=i.onload=function(n){if(i.onerror=i.onload=null,"load"===n.type)s();else{var a=n&&n.type,o=n&&n.target&&n.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+": "+o+")");c.name="ChunkLoadError",c.code="CSS_CHUNK_LOAD_FAILED",c.type=a,c.request=o,i.parentNode&&i.parentNode.removeChild(i),r(c)}},i.href=t,document.head.appendChild(i)}(e,r,0,t,n)}))}(t).then((function(){e[t]=0}),(function(n){throw delete e[t],n})))}}}(),function(){var e={792:0};a.f.j=function(t,n){var s=a.o(e,t)?e[t]:void 0;if(0!==s)if(s)n.push(s[2]);else{var r=new Promise((function(n,a){s=e[t]=[n,a]}));n.push(s[2]=r);var i=a.p+a.u(t),o=new Error;a.l(i,(function(n){if(a.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var r=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",o.name="ChunkLoadError",o.type=r,o.request=i,s[1](o)}}),"chunk-"+t,t)}};var t=function(t,n){var s,r,i=n[0],o=n[1],c=n[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(s in o)a.o(o,s)&&(a.m[s]=o[s]);c&&c(a)}for(t&&t(n);l<i.length;l++)r=i[l],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0},n=self.webpackChunkspaclasses=self.webpackChunkspaclasses||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),function(){var e=a(647);class t extends e.A{constructor(){super({tag:"footer",classNames:["footer"],textContent:"SPA example app",callback:null})}}var n=a(684);const s="nav-item__selected";class r extends e.A{constructor(e,t){super({tag:"a",classNames:["nav-item"],textContent:e.name,callback:e.callback}),this.linkElements=t,this.configureView()}setSelectedStatus(){this.linkElements.forEach((e=>e.setNotSelectedStatus())),this.elementCreator.getElement().classList.add(s)}setNotSelectedStatus(){this.elementCreator.getElement().classList.remove(s)}configureView(){this.elementCreator.getElement().addEventListener("click",this.setSelectedStatus.bind(this))}}var i=a(512);const o={INDEX:"Главная",PRODUCT:"Карточки"};class c extends e.A{constructor(e){super({tag:"header",classNames:["header"]}),this.headerLinkElements=new Map,this.configureView(e)}configureView(e){const t={tag:"nav",classNames:["nav"],textContent:"",callback:null},s=new n.A(t);this.elementCreator.addInnerElement(s),Object.keys(o).forEach((t=>{const n=new r({name:o[t],callback:()=>e.navigate(i.b[t])},this.headerLinkElements);s.addInnerElement(n.getHtmlElement()),this.headerLinkElements.set(i.b[t],n)}))}setSelectedItem(e){const t=this.headerLinkElements.get(e);t instanceof r&&t.setSelectedStatus()}}class l extends e.A{constructor(){super({tag:"main",classNames:["main"],textContent:"",callback:null})}setContent(e){const t=e.getHtmlElement(),n=this.elementCreator.getElement();for(;n.firstElementChild;)n.firstElementChild.remove();n.append(t)}}class u{constructor(e){this.routes=e,document.addEventListener("DOMContentLoaded",(()=>{const e=this.getCurrentPath();this.navigate(e)})),window.addEventListener("popstate",this.browserChangeHandler.bind(this)),window.addEventListener("hashchange",this.browserChangeHandler.bind(this))}navigate(e){const t=this.parseurl(e),n=""===t.resource?t.path:`${t.path}/${i.M}`,s=this.routes.find((e=>e.path===n));s?s.callback(t.resource):this.redirectToNotFoundPage()}parseurl(e){const t={},n=e.split("/");return[t.path="",t.resource=""]=n,t}redirectToNotFoundPage(){const e=this.routes.find((e=>e.path===i.b.NOT_FOUND));e&&this.navigate(e.path)}browserChangeHandler(){const e=this.getCurrentPath();this.navigate(e)}getCurrentPath(){return window.location.hash?window.location.hash.slice(1):window.location.pathname.slice(1)}}const h="spaApp";class d{constructor(){this.fields=this.loadState(),window.addEventListener("beforeunload",this.saveState.bind(this))}setField(e,t){this.fields.set(e,t)}getField(e){return this.fields.has(e)?this.fields.get(e):""}saveState(){const e=Object.fromEntries(this.fields.entries());console.log(e),localStorage.setItem(h,JSON.stringify(e))}loadState(){const e=localStorage.getItem(h);if(console.log(e),e){const t=JSON.parse(e);return new Map(Object.entries(t))}return new Map}}const m=new class{constructor(){this.header=null,this.main=null;const e=new d,t=this.createRoutes(e);this.router=new u(t),this.createView()}createView(){this.header=new c(this.router),this.main=new l;const e=new t;document.body.append(this.header.getHtmlElement(),this.main.getHtmlElement(),e.getHtmlElement())}createRoutes(e){return[{path:"",callback:async()=>{const{default:t}=await a.e(173).then(a.bind(a,173));this.setContent(i.b.INDEX,new t(e))}},{path:`${i.b.INDEX}`,callback:async()=>{const{default:t}=await a.e(173).then(a.bind(a,173));this.setContent(i.b.INDEX,new t(e))}},{path:`${i.b.PRODUCT}/${i.M}`,callback:async e=>{const{default:t}=await a.e(40).then(a.bind(a,40));this.setContent(i.b.PRODUCT,new t(this.router,e))}},{path:`${i.b.PRODUCT}`,callback:async()=>{const{default:e}=await a.e(40).then(a.bind(a,40));this.setContent(i.b.PRODUCT,new e(this.router,""))}},{path:`${i.b.NOT_FOUND}`,callback:async()=>{const{default:e}=await a.e(719).then(a.bind(a,719));this.setContent(i.b.NOT_FOUND,new e)}}]}setContent(e,t){this.header.setSelectedItem(e),this.main.setContent(t)}};console.log(m)}()}();